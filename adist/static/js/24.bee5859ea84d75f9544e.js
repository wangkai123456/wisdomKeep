webpackJsonp([24],{NLSP:function(e,r){},ozjS:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("Dd8w"),a=t.n(o),s=t("Xxa5"),l=t.n(s),n=t("exGp"),i=t.n(n),u=t("gyMJ"),c=t("sYY+"),m=t.n(c),d=t("0xDb"),p=t("NYxO"),g={data:function(){return{ruleForm:{classRecord:"",desc:"",grades:[],graduateSchool:"",isDelete:!1,name:"",photoUrl:"",schooles:[],subject:"",intro:""},editor:"",rules:{name:[{required:!0,message:"请输入教师姓名",trigger:"change"}],gradeId:[{required:!0,message:"请选择授课学科",trigger:"change"}],graduateSchool:[{required:!0,message:"请输入毕业学校",trigger:"change"}],photoUrl:[{required:!0,message:"请上传图片",trigger:"change"}],desc:[{required:!0,message:"请输入教师描述",trigger:"change"}],intor:[{required:!0,message:"请输入教师描述",trigger:"change"}],grades:[{required:!0,type:"array",message:"请选择负责年级",trigger:"change"}],schooles:[{required:!0,type:"array",message:"请选择授课学校",trigger:"change"}],subject:[{required:!0,message:"请选择授课学科",trigger:"change"}],diploma:[{required:!0,message:"请输入学历",trigger:"change"}],intro:[{required:!0,message:"请输入座右铭",trigger:"change"}]}}},created:function(){var e=this;return i()(l.a.mark(function r(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},r,e)}))()},computed:a()({},Object(p.b)({QiuniuToken:function(e){return e.Account.QnInfo.token},QiuniuDomain:function(e){return e.Account.QnInfo.domainName}})),mounted:function(){var e=this;return i()(l.a.mark(function r(){var t,o;return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.$route.query.id){r.next=7;break}return r.next=3,u.i.querySchoolDetail(e.$route.query.id);case 3:t=r.sent,e.ruleForm=t.data,e.ruleForm.schooles=e.ruleForm.schooles.map(function(e){return e.id}),e.ruleForm.grades=e.ruleForm.grades.map(function(e){return e.id});case 7:return r.next=9,u.a.queryQnToken();case 9:o=r.sent,e.$store.commit("Account/QUERY_QTOKEN",o.data),e.editor=new m.a(e.$refs.editor),e.editor.customConfig.uploadImgShowBase64=!1,e.editor.customConfig.showLinkImg=!1,e.editor.customConfig.qiniu=!0,e.editor.create(),e.$route.query.id&&e.editor.txt.html(e.ruleForm.desc),Object(d.a)({token:e.QiuniuToken,domain:e.QiuniuDomain})(e.editor);case 18:case"end":return r.stop()}},r,e)}))()},methods:{createdSchool:function(){var e=this;return i()(l.a.mark(function r(){return l.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e.ruleForm.desc=e.editor.txt.html(),r.next=4,e.$refs.ruleForm.validate();case 4:return e.ruleForm.grades=e.ruleForm.grades.join(":"),e.ruleForm.schooles=e.ruleForm.schooles.join(":"),r.next=11,u.i.createdSchool(e.ruleForm);case 11:e.$message.success("成功"),e.$router.push("teacherAdmin"),r.next=20;break;case 15:r.prev=15,r.t0=r.catch(0),e.ruleForm.grades=[],e.ruleForm.schooles=[];case 20:case"end":return r.stop()}},r,e,[[0,15]])}))()},successFile:function(e){this.ruleForm.photoUrl=this.$store.state.Account.QnInfo.domainName+e.key}}},f={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"box"},[t("header-tit",{attrs:{img:"teT.png",tit:"教师管理",back:"1"}}),e._v(" "),t("div",{staticClass:"content"},[t("el-form",{ref:"ruleForm",attrs:{inline:!0,model:e.ruleForm,rules:e.rules,"label-position":"right","label-width":"80px"}},[t("el-form-item",{attrs:{label:"教师姓名",prop:"name"}},[t("el-input",{staticClass:"fi",model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"学历",prop:"diploma"}},[t("el-input",{staticClass:"fi",model:{value:e.ruleForm.diploma,callback:function(r){e.$set(e.ruleForm,"diploma",r)},expression:"ruleForm.diploma"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"毕业学校",prop:"graduateSchool"}},[t("el-input",{staticClass:"fi",model:{value:e.ruleForm.graduateSchool,callback:function(r){e.$set(e.ruleForm,"graduateSchool",r)},expression:"ruleForm.graduateSchool"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"座右铭",prop:"intro"}},[t("el-input",{staticClass:"fi",model:{value:e.ruleForm.intro,callback:function(r){e.$set(e.ruleForm,"intro",r)},expression:"ruleForm.intro"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"负责年级",prop:"grades"}},[t("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.ruleForm.grades,callback:function(r){e.$set(e.ruleForm,"grades",r)},expression:"ruleForm.grades"}},e._l(this.$store.state.BaseConfig.grades,function(e,r){return t("el-option",{key:r,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),t("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"授课学科",prop:"subject"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.subject,callback:function(r){e.$set(e.ruleForm,"subject",r)},expression:"ruleForm.subject"}},e._l(this.$store.state.BaseConfig.subjects,function(e,r){return t("el-option",{key:r,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),t("el-form-item",{attrs:{label:"授课学校",prop:"schooles"}},[t("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.ruleForm.schooles,callback:function(r){e.$set(e.ruleForm,"schooles",r)},expression:"ruleForm.schooles"}},e._l(this.$store.state.BaseConfig.schools,function(e,r){return t("el-option",{key:r,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),t("div",[t("el-form-item",{attrs:{label:"上传图片",prop:"photoUrl"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{data:{token:e.$store.state.Account.QnInfo.token},action:"http://up-z0.qiniu.com","show-file-list":!1,"on-success":e.successFile}},[e.ruleForm.photoUrl?t("img",{staticClass:"avatar",attrs:{src:e.ruleForm.photoUrl}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),t("div",[t("el-form-item",{attrs:{label:"教师描述",prop:"desc"}},[t("div",{ref:"editor",staticClass:"edit",staticStyle:{"text-align":"left","z-index":"9"}})])],1)],1),e._v(" "),t("div",{staticClass:"bo mar"},[t("el-button",{attrs:{type:"primary"},on:{click:e.createdSchool}},[e._v("确认新增")])],1)],1)],1)},staticRenderFns:[]};var h=t("VU/8")(g,f,!1,function(e){t("NLSP")},"data-v-2a2081ed",null);r.default=h.exports}});