webpackJsonp([22],{"42yD":function(t,e){},PURG:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("Xxa5"),r=n.n(a),i=n("exGp"),s=n.n(i),u=n("gyMJ"),c={data:function(){return{tableData3:[],filter:{offset:0,limit:10,columId:""},ids:[],count:0,grades:[],subjects:[]}},watch:{filter:{handler:function(){this.queryMsg()},deep:!0}},created:function(){var t=this;return s()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.queryMsg();case 1:case"end":return e.stop()}},e,t)}))()},methods:{queryMsg:function(){var t=this;return s()(r.a.mark(function e(){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.e.queryMsg(t.filter);case 2:n=e.sent,t.tableData3=n.data,t.count=n.count;case 5:case"end":return e.stop()}},e,t)}))()},updateStatus:function(t){var e=this;return s()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.ids.length){n.next=2;break}return n.abrupt("return",e.$message("请选择您要签发/撤稿/删除的文章"));case 2:return n.next=4,u.e.updateStatus(e.ids,t);case 4:e.queryMsg(),e.$message.success("成功"),e.queryMsg();case 7:case"end":return n.stop()}},n,e)}))()},currentPage:function(t){this.filter.offset=t*this.filter.limit-1,this.queryMsg()},deleteSchool:function(t){var e=this;return s()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.ids.length){n.next=2;break}return n.abrupt("return",e.$message("请选择您要签发/撤稿/删除的文章"));case 2:return n.next=4,e.$confirm("确认要执行此操作吗");case 4:return n.next=6,u.e.deleteMsg(t?[t]:e.ids);case 6:e.queryMsg();case 7:case"end":return n.stop()}},n,e)}))()},handleSelectionChange:function(t){this.ids=t.map(function(t){return t.id})},pageChange:function(t){this.filter.offset=this.filter.offset+this.filter.limit},pageChangePre:function(t){this.filter.offset=this.filter.offset-this.filter.limit}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("header-tit",{attrs:{img:"newT.png",tit:"新闻资讯"}}),t._v(" "),n("div",{staticClass:"top"},[n("div",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.$router.push("/newMsgDetail")}}},[t._v("添加文章")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateStatus("ON")}}},[t._v("签发")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateStatus("OFF")}}},[t._v("撤稿")]),t._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:function(e){t.deleteSchool()}}},[t._v("删除")])],1)]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData3,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{prop:"id",label:"ID",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s("OFF"==e.row.status?"撤稿":"签发")+"\n      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"文章标题"}}),t._v(" "),n("el-table-column",{attrs:{prop:"columnName",label:"文章栏目"}}),t._v(" "),n("el-table-column",{attrs:{label:"录入时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(t._s(t._f("formatDate")(e.row.creationTime)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"修改时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",[t._v(t._s(t._f("formatDate")(e.row.modifiedTime)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"ID",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){t.$router.push("/newMsgDetail?id="+e.row.id)}}},[t._v("修改")])]}}])})],1),t._v(" "),n("div",{staticClass:"pat"},[t.count?n("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.filter.limit,total:t.count},on:{"next-click":t.pageChange,"prev-click":t.pageChangePre,"current-change":t.currentPage}}):t._e()],1)],1)},staticRenderFns:[]};var l=n("VU/8")(c,o,!1,function(t){n("42yD")},"data-v-3776eff0",null);e.default=l.exports}});