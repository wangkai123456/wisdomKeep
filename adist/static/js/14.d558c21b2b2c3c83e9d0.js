webpackJsonp([14],{j3Fb:function(e,r){},tjlo:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("mvHQ"),o=t.n(a),s=t("Xxa5"),n=t.n(s),i=t("exGp"),l=t.n(i),c=t("gyMJ"),u={data:function(){return{ruleForm:{desc:"",formFields:[],name:""},form:null,tableData:[],diaLog:!1,rules:{name:[{required:!0,message:"请输入专题名称",trigger:"change"}],desc:[{required:!0,message:"请选择专题介绍",trigger:"change"}],formFields:[{required:!0,message:"请编辑表单",trigger:"change"}]},ruleForms:{type:[{required:!0,message:"请输入type",trigger:"change"}],key:[{required:!0,message:"请输入key",trigger:"change"}]}}},watch:{diaLog:function(e){e||(this.form=null)}},created:function(){var e=this;return l()(n.a.mark(function r(){var t;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.$route.query.id){r.next=6;break}return r.next=3,c.f.querySchoolDetail(e.$route.query.id);case 3:t=r.sent,e.ruleForm=t.data,e.ruleForm.formFields=JSON.parse(t.data.formFields);case 6:case"end":return r.stop()}},r,e)}))()},methods:{successFile:function(e){this.ruleForm.webUrl=this.$store.state.Account.QnInfo.domainName+e.key},addForm:function(){var e=this;return l()(n.a.mark(function r(){return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$refs.form.validate();case 2:e.ruleForm.formFields.push(e.form),e.diaLog=!1;case 4:case"end":return r.stop()}},r,e)}))()},created:function(){var e=this;return l()(n.a.mark(function r(){return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$refs.ruleForm.validate();case 2:return e.ruleForm.formFields=o()(e.ruleForm.formFields),r.next=5,c.f.createdSchool(e.ruleForm);case 5:e.$message.success("成功"),e.$router.push("special");case 7:case"end":return r.stop()}},r,e)}))()},showDiaLog:function(){this.form=new function(){return{key:"",type:""}},this.diaLog=!0}}},m={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"box"},[t("header-tit",{attrs:{img:"spT.png",tit:"专题管理",back:"1"}}),e._v(" "),t("div",{staticClass:"content"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-position":"right","label-width":"100px"}},[t("el-form-item",{attrs:{label:"专题名称",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"专题介绍",prop:"desc"}},[t("el-input",{model:{value:e.ruleForm.desc,callback:function(r){e.$set(e.ruleForm,"desc",r)},expression:"ruleForm.desc"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"编辑表单",prop:"formFields"}},[t("table",{staticClass:"table"},[t("tr",[t("td",{staticClass:"key"},[e._v("key")]),e._v(" "),t("td",[e._v("type")])]),e._v(" "),e._l(e.ruleForm.formFields,function(r,a){return t("tr",{key:a},[t("td",{staticClass:"key"},[e._v(e._s(r.key))]),e._v(" "),t("td",[e._v(e._s(r.type))]),e._v(" "),t("td",{staticClass:"el-icon-error",on:{click:function(r){e.ruleForm.formFields.splice(a,1)}}})])})],2),e._v(" "),t("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(r){e.showDiaLog()}}},[e._v("添加表单")])],1)],1),e._v(" "),t("div",{staticStyle:{"text-align":"center"}},[t("el-button",{staticClass:"be",attrs:{type:"primary"},on:{click:function(r){e.created()}}},[e._v("保存")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"添加表单",visible:e.diaLog,width:"400px"},on:{"update:visible":function(r){e.diaLog=r}}},[e.form?t("el-form",{ref:"form",attrs:{model:e.form,rules:e.ruleForms}},[t("el-form-item",{attrs:{label:"key",prop:"key"}},[t("el-input",{attrs:{placeholder:"请输入key"},model:{value:e.form.key,callback:function(r){e.$set(e.form,"key",r)},expression:"form.key"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"type",prop:"type"}},[t("el-input",{attrs:{placeholder:"请输入type"},model:{value:e.form.type,callback:function(r){e.$set(e.form,"type",r)},expression:"form.type"}})],1)],1):e._e(),e._v(" "),t("div",{staticStyle:{"text-align":"center"}},[t("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(r){e.addForm()}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var d=t("VU/8")(u,m,!1,function(e){t("j3Fb")},"data-v-7f4623f7",null);r.default=d.exports}});